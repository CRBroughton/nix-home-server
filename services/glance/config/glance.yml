pages:
  - name: Home Server
    columns:
      - size: full
        widgets:
          - type: server-stats
            servers:
            - type: local
              name: Services

          - type: custom-api
            title: Backups
            cache: 1h
            url: http://nixos-server.tail538465.ts.net:8087/stats
            template: |
              {{ if eq (.JSON.String "status") "ok" }}
              Last backup: {{ .JSON.String "latest_snapshot.time" | parseTime "2006-01-02T15:04:05.999999999Z07:00" | formatTime "02 Jan 2006 15:04" }}
              Snapshots: {{ .JSON.Int "snapshot_count" }} | Stored: {{ .JSON.String "total_size" }} | Restore: {{ .JSON.String "restore_size" }} | Dedupe: {{ .JSON.Float "dedupe_ratio" }}x
              {{ else }}
              Status: {{ .JSON.String "status" }}
              {{ if .JSON.String "error" }}Error: {{ .JSON.String "error" }}{{ end }}
              {{ end }}

      - size: full
        widgets:
          - type: docker-containers
            containers:
              # Tailscale sidecars (hidden)
              glance:
                hide: true
              tailscale-glance:
                hide: true
              restic-exporter:
                hide: true
              tailscale-cinny:
                hide: true
              tailscale-thelounge:
                hide: true
              tailscale-freshrss:
                hide: true
              tailscale-calibre:
                hide: true
              tailscale-copyparty:
                hide: true
              tailscale-adguard:
                hide: true
              tailscale-mumble:
                hide: true
              tailscale-irc:
                hide: true
              tailscale-mealie:
                hide: true
              tailscale-matrix:
                hide: true
              tailscale-openwebui:
                hide: true
              ollama:
                hide: true
              # HTTP services (Tailscale Funnel)
              cinny:
                name: Cinny
                description: Chat server (web client)
                url: https://cinny.tail538465.ts.net
              thelounge:
                name: The lounge
                description: IRC server (web client)
                url: https://thelounge.tail538465.ts.net
              freshrss:
                name: FreshRSS
                description: RSS feed (web client)
                url: https://freshrss.tail538465.ts.net
              calibre-web-automated:
                name: Calibre
                description: Book server (web client)
                url: https://calibre.tail538465.ts.net
              copyparty:
                name: Copyparty
                description: File sharing (web client)
                url: https://copyparty.tail538465.ts.net
              mealie:
                name: Mealie
                description: Meal planner (web client)
                url: https://mealie.tail538465.ts.net
              openwebui:
                name: Open WebUI
                description: LLM chat interface (Ollama)
                url: https://openwebui.tail538465.ts.net
              synapse:
                name: Matrix
                description: Matrix chat server
                url: https://matrix.tail538465.ts.net
              # Hidden services
              synapse-db:
                hide: true
              searxng:
                name: SearXNG
                description: Local search engine (web client)
                url: http://nixos-server.tail538465.ts.net:4000
              # Non-HTTP services (MagicDNS only)
              adguard:
                name: Adguard
                description: Network ad blocker (web client)
                url: http://adguard.tail538465.ts.net
              murmur:
                name: Mumble
                description: Audio chat server
              ergo:
                name: IRC
                description: Local IRC chat server

  - name: Home
    # Optionally, if you only have a single page you can hide the desktop navigation for a cleaner look
    # hide-desktop-navigation: true
    columns:
      - size: small
        widgets:
          - type: calendar
            first-day-of-week: monday

          - type: rss
            limit: 10
            collapse-after: 3
            cache: 12h
            feeds:
              - url: https://selfh.st/rss/
                title: selfh.st
                limit: 4
              - url: https://ciechanow.ski/atom.xml
              - url: https://www.joshwcomeau.com/rss.xml
                title: Josh Comeau
              - url: https://samwho.dev/rss.xml
              - url: https://ishadeed.com/feed.xml
                title: Ahmad Shadeed

          - type: twitch-channels
            channels:
              - theprimeagen
              - j_blow
              - giantwaffle
              - cohhcarnage
              - christitustech
              - EJ_SA

      - size: full
        widgets:
          - type: group
            widgets:
              - type: hacker-news
              - type: lobsters

          - type: videos
            channels:
              - UCXuqSBlHAE6Xw-yeJA0Tunw # Linus Tech Tips
              - UCR-DXc1voovS8nhAvccRZhg # Jeff Geerling
              - UCsBjURrPoezykLs9EqgamOA # Fireship
              - UCBJycsmduvYEL83R_U4JriQ # Marques Brownlee
              - UCHnyfMqiRRG1u-2MsSQLbXA # Veritasium

          - type: group
            widgets:
              - type: reddit
                subreddit: technology
                show-thumbnails: true
              - type: reddit
                subreddit: selfhosted
                show-thumbnails: true

      - size: small
        widgets:
          - type: weather
            location: London, United Kingdom
            units: metric # alternatively "imperial"
            hour-format: 12h # alternatively "24h"
            # Optionally hide the location from being displayed in the widget
            # hide-location: true

          - type: markets
            markets:
              - symbol: SPY
                name: S&P 500
              - symbol: BTC-USD
                name: Bitcoin
              - symbol: NVDA
                name: NVIDIA
              - symbol: AAPL
                name: Apple
              - symbol: MSFT
                name: Microsoft

          - type: releases
            cache: 1d
            # Without authentication the Github API allows for up to 60 requests per hour. You can create a
            # read-only token from your Github account settings and use it here to increase the limit.
            # token: ...
            repositories:
              - glanceapp/glance
              - go-gitea/gitea
              - immich-app/immich
              - syncthing/syncthing




  # Add more pages here:
  # - name: Your page name
  #   columns:
  #     - size: small
  #       widgets:
  #         # Add widgets here

  #     - size: full
  #       widgets:
  #         # Add widgets here

  #     - size: small
  #       widgets:
  #         # Add widgets here
